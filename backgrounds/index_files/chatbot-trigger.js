!function(){"use strict";try{if("undefined"!=typeof document){var t=document.createElement("style");t.appendChild(document.createTextNode(".phenom-chatbot-wrapper{position:fixed;z-index:999;background:transparent;width:var(--chatbot-wrapper-width);height:var(--chatbot-wrapper-height);transition:all .1s;display:flex}.phenom-chatbot-sub-wrapper{width:100%;height:100%;position:relative;border-radius:inherit}div[data-chatbotState*=notification-widget]{min-width:min(360px,100vw);filter:drop-shadow(5px 5px 3px rgba(0,0,0,.15))}div[data-chatbotState*=window-open]{min-width:min(360px,100vw)}div[data-chatbotState*=window-open][data-chatbotWindowSize=mini-h]{height:316px}div[data-chatbotState*=window-open][data-chatbotWindowSize=maxi-h]{height:90%;min-width:min(540px,100vw)}div[data-chatbotState*=sidepanel-open]{width:1000px;max-width:min(1000px,95%)}div[data-chatbotState*=sidepanel-minimize]{width:min(382px,100vw)}div[data-chatbotState*=sidepanel-modal]{width:93%}div[data-chatbotState*=window-closed]{width:87px;height:83px}div[data-chatbotPosition*=bottom-left]{bottom:32px;left:24px}div[data-chatbotPosition*=bottom-right]{bottom:32px;right:24px}.phenom-chatbot-video-wrapper{position:fixed;z-index:10000;background-color:#00000080;top:0;bottom:0;left:0;right:0;display:flex;justify-content:center;align-items:center}.phenom-chatbot-video-wrapper .close-icon{position:absolute;top:25px;right:25px;border:none;background:transparent;font-size:2.5rem;font-weight:700;line-height:1;color:#000;filter:drop-shadow(4px 3px 11px #fff);width:50px;height:50px}@media (max-width: 720px),(max-height: 320px){.phenom-chatbot-wrapper[data-chatbotState*=window-open]{width:100%!important;height:100%!important;bottom:0px!important;right:0px!important;left:unset!important;top:unset!important;transform:unset!important;max-height:100%!important}.ph-chatbot-parent-body{overflow:hidden}}.phenom-chatbot-wrapper[data-theme=classic]{border-radius:10px}.phenom-chatbot-wrapper[data-theme=classic][data-chatbotState*=window-open]{filter:drop-shadow(4px 4px 8px rgba(46,46,52,.25))}.phenom-chatbot-wrapper[data-theme=classic][data-chatbotState*=window-open][data-chatbotWindowSize=normal-h]{height:82%}.phenom-chatbot-wrapper[data-theme=classic][data-chatbotState*=window-closed]{width:87px;height:83px}.phenom-chatbot-wrapper[data-theme=phenom-x-plus]{z-index:9995}.phenom-chatbot-wrapper[data-theme=phenom-x-plus][data-chatbotState*=window-open]{filter:drop-shadow(0px 5px 14px rgba(46,46,52,.25))}.phenom-chatbot-wrapper[data-theme=phenom-x-plus][data-chatbotState*=window-open][data-chatbotWindowSize=normal-h]{height:72%}.phenom-chatbot-wrapper[data-theme=phenom-x-plus][data-chatbotState*=window-closed]{width:68px;height:68px}.phenom-chatbot-wrapper[data-theme=phenom-x-plus][data-chatbotPosition*=bottom-right]{right:1.875vw;bottom:9vh}.phenom-chatbot-wrapper[data-theme=prime]{border-radius:24px}.phenom-chatbot-wrapper[data-theme=prime][data-chatbotState*=window-open]{filter:drop-shadow(4px 4px 8px rgba(46,46,52,.25))}.phenom-chatbot-wrapper[data-theme=prime][data-chatbotState*=window-open][data-chatbotWindowSize=normal-h],.phenom-chatbot-wrapper[data-theme=prime][data-chatbotState*=window-open][data-chatbotState*=sidepanel-minimize]{height:92%;max-height:max(800px,65%)}.phenom-chatbot-wrapper[data-theme=prime][data-chatbotState*=window-open][data-chatbotWindowSize=maxi-h]{height:92%;min-width:min(540px,100vw)}.phenom-chatbot-wrapper[data-theme=prime][data-chatbotState*=window-closed]{width:80px;height:80px}.phenom-chatbot-wrapper[data-theme=prime][data-chatbotPosition*=bottom-right]{right:2.8vh;bottom:5.18vh}.phenom-chatbot-wrapper[data-theme=prime][data-chatbotState*=notification-widget]{min-width:min(340px,100vw);width:min(340px,100vw)}")),document.head.appendChild(t)}}catch(a){console.error("vite-plugin-css-injected-by-js",a)}}();
var __defProp=Object.defineProperty,__defNormalProp=(t,e,o)=>e in t?__defProp(t,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[e]=o,__publicField=(t,e,o)=>(__defNormalProp(t,"symbol"!=typeof e?e+"":e,o),o);!function(){var t,e,o,n;const i="Chatbot cant be loaded due to missing dependencies",a="Chatbot cant be initated here !",r=[/\/apply.*[?]/gi],h=["screening","chatbot"],s="phenomChatbotIframe",c="phenomChatbotWrapper",d="phenomChatbotVideoWrapper";function l(t,e,o=10,n=0,a=!1){return new Promise(((r,h)=>{void 0!==t?r():(n>=o&&(a&&h(`Max retries reached: ${i}`),r()),setTimeout((()=>{r(l(t,e,o,n+1))}),e))}))}function b(t,e={}){const o=document.createElement("iframe");o.referrerPolicy="strict-origin-when-cross-origin",o.setAttribute("src",t);for(const n in e)o.setAttribute(n,e[n]);return o}function u(t){!function(t,e){if(!e)return;document.body.style.cursor="move",document.body.style.userSelect="none";const o=5,n=5,i=window.innerWidth-e.clientWidth-10,a=window.innerHeight-e.clientHeight-5,r=Math.min(Math.max(t.clientY-o,o),a),h=Math.min(Math.max(t.clientX-n,n),i);e.style.top=`${r}px`,e.style.left=`${h}px`,e.style.transform="unset"}(t,document.getElementById(c))}function p(){m()}function m(){document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",p),document.body.style.cursor="",document.body.style.userSelect=""}class w{constructor(t){__publicField(this,"chatbotInitiator"),__publicField(this,"chatbotDraggableClassName","chatbot-draggable"),this.chatbotInitiator=t}postDataToChatbot(t,e={}){var o;if(this.chatbotInitiator.loadChatbotInIframe){const n=document.getElementById(s);null==(o=null==n?void 0:n.contentWindow)||o.postMessage({eventName:t,payload:e},this.chatbotInitiator.chatbotOrigin)}else window.postMessage({eventName:t,payload:e},this.chatbotInitiator.chatbotOrigin)}sendPageRelatedRequiredInfoToChatbot(){var t,e,o,n,i,a,r,h,s,c,d,l,b,u,p,m,w;const v=Boolean(window.phChatbot.currentJobInfo),C=Boolean(null==(e=null==(t=window.phChatbot.phContext)?void 0:t.ddo)?void 0:e.eagerLoadRefineSearch),f={pageName:null==(o=window.phChatbot.phContext)?void 0:o.pageName,pageType:null==(n=window.phChatbot.phContext)?void 0:n.pageType,pageURL:window.location.href,...null==(i=window.phChatbot.phContext)?void 0:i.pageInfo};if(v){const t={...window.phChatbot.currentJobInfo,id:null==(a=window.phChatbot.currentJobInfo)?void 0:a.jobId,sequenceNumber:null==(r=window.phChatbot.currentJobInfo)?void 0:r.jobSeqNo,category:null==(h=window.phChatbot.currentJobInfo)?void 0:h.category,title:null==(s=window.phChatbot.currentJobInfo)?void 0:s.title,location:null==(c=window.phChatbot.currentJobInfo)?void 0:c.location,visibilityType:null==(d=window.phChatbot.currentJobInfo)?void 0:d.visibilityType,ats:null==(l=window.phChatbot.currentJobInfo)?void 0:l.ats};this.postDataToChatbot("PAGE_INFO",{pageInfo:f,jobInfo:t})}else if(C){const t={category:null},e=null==(w=null==(m=null==(p=null==(u=null==(b=window.phChatbot.phContext)?void 0:b.ddo)?void 0:u.eagerLoadRefineSearch)?void 0:p.data)?void 0:m.ui_selections)?void 0:w.category;(null==e?void 0:e.length)&&(t.category=e[0]),this.postDataToChatbot("PAGE_INFO",{pageInfo:f,jobInfo:t})}else this.postDataToChatbot("PAGE_INFO",{pageInfo:f})}removeElementAndRaiseChatbotInputFocusEvent(t){var e;null==(e=document.getElementById(t))||e.remove(),this.postDataToChatbot("FOCUS_ON_CHATBOT_USER_INPUT")}addRequiredEventListeners(t){window.addEventListener("message",(e=>{if(e.origin!==t)return;const o=e.data.eventName,n=e.data.payload;switch(o){case"CHATBOT_INITIALIZE":this.parseAndSendInitialWrapperInfo(),window.dispatchEvent(new CustomEvent("CHATBOT_INITIATE",{detail:n}));break;case"CHATBOT_POSITION":n&&(this.chatbotInitiator.chatbotPosition.value=n);break;case"CHATBOT_DIMENSIONS_STATE":n.currentChatbotState&&(this.chatbotInitiator.chatbotState.value=n.currentChatbotState),this.setChatbotWrapperDimensions(n.dimensions);break;case"CHATBOT_THEME":n&&(this.chatbotInitiator.chatbotTheme.value=n);break;case"CHATBOT_SIZE":n&&(this.chatbotInitiator.chatbotSize.value=n);break;case"GET_WINDOW_DIMENSIONS":this.postWindowDimensionsToChatbot();break;case"ADD_WINDOW_RESIZE_LISTENER":{const t=new w(this.chatbotInitiator);window.addEventListener("resize",(()=>{t.postWindowDimensionsToChatbot()}));break}case"REMOVE_WINDOW_RESIZE_LISTENER":{const t=new w(this.chatbotInitiator);window.removeEventListener("resize",(()=>{t.postWindowDimensionsToChatbot()}));break}case"MOVE_CHATBOT_WITH_MOUSE":(null==n?void 0:n.enabled)?this.handleDraggableEventOnChatbot():this.handleDraggableEventOnChatbot(!0);break;case"SHOW_FULLSCREEN_IFRAME":this.removeElementAndRaiseChatbotInputFocusEvent(d),this.chatbotInitiator.createIframeVideoWrapper(null==n?void 0:n.src,{id:d},{...n});break;default:o&&document.dispatchEvent(new CustomEvent(o,{detail:n}))}}),!1),document.addEventListener("ph:bot:removeProfile",(()=>{this.postDataToChatbot("RESET_PERSONALIZATION")})),window.addEventListener("PhenomChatbotTriggerEvent",(t=>{var e,o;const n=t,i=n.detail.action,a=n.detail.data;switch(i){case"reInitChatbot":window.phChatbot.configurations={data:{}},null==(e=document.getElementById(c))||e.remove(),this.chatbotInitiator.initiate(!1);break;case"removeChatbot":window.phChatbot.configurations={data:{}},null==(o=document.getElementById(c))||o.remove();break;default:console.log(a)}}))}parseAndSendInitialWrapperInfo(){this.postDataToChatbot("PARENT_SITE_LOCATION",window.location.href);const t=(this.chatbotInitiator.chatbotWrapperElement&&getComputedStyle(this.chatbotInitiator.chatbotWrapperElement).borderRadius)??"10px";this.postDataToChatbot("BORDER_RADIUS",t),this.sendPageRelatedRequiredInfoToChatbot()}postWindowDimensionsToChatbot(){this.postDataToChatbot("PARENT_WINDOW_DIMENSIONS",{width:window.innerWidth,height:window.innerHeight})}setChatbotWrapperDimensions(t={}){this.chatbotInitiator.chatbotDimensions.value={width:`${t.width}px`,height:`${t.height}px`}}handleDraggableEventOnChatbot(t=!1){t?m():(document.addEventListener("mouseup",p),document.addEventListener("mousemove",u))}}function v(t,e){const o=()=>({get:(t,e)=>"object"==typeof t[e]?new Proxy(t[e],o()):t[e],set:(t,o,n)=>{const i=JSON.parse(JSON.stringify(t));return t[o]=n,e&&e(i.value,t.value),!0}});return new Proxy({value:t},o())}const C=new class{constructor(t){var e,o,n;__publicField(this,"loadChatbotInIframe",!1),__publicField(this,"chatbotBaseUrl"),__publicField(this,"chatbotPageEndpoint",{}.C_WRAPPER_SCRIPT_PAGE_PATH||"chatbot"),__publicField(this,"chatbotOrigin",""),__publicField(this,"communicationService"),__publicField(this,"chatbotPosition",v("bottom-right",f)),__publicField(this,"chatbotWrapperElement"),__publicField(this,"chatbotInitiator"),__publicField(this,"chatbotDimensions",v({},y)),__publicField(this,"chatbotState",v("chatbot-closed",g)),__publicField(this,"chatbotTheme",v("classic",I)),__publicField(this,"chatbotSize",v("normal-h",E));try{t=t??(null==(o=null==(e=window.phChatbot)?void 0:e.phContext)?void 0:o.baseURL)??window.location.href,this.chatbotOrigin=null==(n=new URL(t))?void 0:n.origin,this.chatbotBaseUrl=t.endsWith("/")?t:t+"/",this.chatbotBaseUrl.endsWith(this.chatbotPageEndpoint+"/")&&(this.chatbotBaseUrl=this.chatbotBaseUrl.slice(0,-this.chatbotPageEndpoint.length))}catch(i){if("TypeError"!==(null==i?void 0:i.name))throw Error("Unexpected error: Chatbot Trigger Initialization stopped.");this.chatbotOrigin=window.location.origin,this.chatbotBaseUrl=window.location.origin}this.communicationService=new w(this)}invokeInitator(){"complete"===document.readyState?this.initiate():window.addEventListener("load",(()=>{this.invokeInitator()}))}async initiate(t=!0){var e,o,n,i;await l(null==(e=window.phChatbot)?void 0:e.phContext,300,5),function(t,e){for(const o of e){const e=RegExp(o).exec(t);if(e&&e.length>0)return!0}return!1}(window.location.href,r)||function(t,e){if(!t||!(null==e?void 0:e.length))return!1;for(const o of e)if(o===t)return!0;return!1}(null==(n=null==(o=window.phChatbot)?void 0:o.phContext)?void 0:n.pageName,h)?console.info(a):(t&&this.communicationService.addRequiredEventListeners(this.chatbotOrigin??window.location.origin),(null==(i=window.phChatbot)?void 0:i.phContext)?(this.loadChatbotInIframe=!window.phChatbot.isContainerApproachEnabledForTXM,await this.createChatbotWrapper()):(this.loadChatbotInIframe=!0,await this.createChatbotWrapper()))}async createChatbotWrapper(){var t,e,o;const n=document.createElement("div");n.setAttribute("class","phenom-chatbot-wrapper"),n.setAttribute("id",c),n.setAttribute("data-theme",`${this.chatbotTheme.value}`),n.setAttribute("data-chatbotState",`${this.chatbotState.value}`),n.setAttribute("data-chatbotWindowSize",`${this.chatbotSize.value}`),n.setAttribute("data-chatbotPosition",`${this.chatbotPosition.value}`);const i=document.createElement("div");if(i.setAttribute("class","phenom-chatbot-sub-wrapper"),this.loadChatbotInIframe){let t=new URL(this.chatbotPageEndpoint,this.chatbotBaseUrl).href;t+="?chatbotLoadedInIframe=true",t=function(t,e){const o=new URL(t).searchParams,n=new URLSearchParams;for(const a of o.keys())a.startsWith("utm_")&&n.set(a,o.get(a)??"");let i=e;return Array.from(n.keys()).length>0&&(e.includes("?")?i+="&":i+="?"),i+=n.toString(),i}(window.location.href,t);const e=b(t,{frameborder:"0",scrolling:"no",id:s,title:"Chatbot",allow:"geolocation *; autoplay *;",style:"background:transparent;width:100%;height:100%;border-radius:inherit;"});i.appendChild(e)}else{let n=null==(t=window.phChatbot)?void 0:t.configurations;if((!(null==n?void 0:n.data)||Object.keys(null==n?void 0:n.data).length<=0)&&(n=await(null==(o=window.phChatbot)?void 0:o.makeFetchRequest(null==(e=window.phChatbot)?void 0:e.configurationsDDO,{body:{currentUrlPath:window.location.href}}))),!(null==n?void 0:n.data)||200!==n.statusCode)return void console.info("Configurations Not found");if(!n.data.isChannelEnabled)return void console.info("Chatbot is disabled!!");window.phChatbot.configurations=n,!function(t,e,o=0){t||console.error("Unexpected error: Chatbot missing chatbot script in configs");const n=document.createElement("div");n.innerHTML=t;const i=n.querySelector("phenom-chatbot"),a=n.querySelectorAll("script"),r=n.querySelectorAll("link");setTimeout((function(){i&&e.appendChild(i);const t=document.getElementsByTagName("body")[0];for(const e of a){const o=document.createElement("script");o.src=e.src,o.text=e.text,t.appendChild(o)}for(const e of r)t.appendChild(e)}),o)}(n.data.chatbotInjectScript,i,n.data.chatbotLoadDelay),this.chatbotPosition.value=n.data.chatbotPosition||this.chatbotPosition.value,this.chatbotTheme.value=n.data.chatbotTheme||this.chatbotTheme.value}n.appendChild(i),document.body.appendChild(n),this.chatbotWrapperElement=document.getElementById(c)}createIframeVideoWrapper(t,e={},o={}){const n=document.createElement("div");n.setAttribute("class","phenom-chatbot-video-wrapper"),n.setAttribute("aria-live","assertive"),n.setAttribute("aria-label",o.title),n.onclick=()=>this.communicationService.removeElementAndRaiseChatbotInputFocusEvent(d);const i=document.createElement("button");i.setAttribute("class","close-icon"),i.onclick=()=>this.communicationService.removeElementAndRaiseChatbotInputFocusEvent(d),i.innerHTML="×";for(const r in e)n.setAttribute(r,e[r]);const a=b(t,{frameborder:"0",scrolling:"no",id:"chatbotVideoIframe",title:"Chatbot",allow:"geolocation autoplay",type:"content",style:"background:none;width:98%;height:80%;border-radius:inherit;width: min(560px, 90%);height: 75%;",...o});n.appendChild(i),n.appendChild(a),document.body.appendChild(n),setTimeout((()=>{i.focus()}),300),n.addEventListener("keydown",(t=>{"Escape"===t.key&&this.communicationService.removeElementAndRaiseChatbotInputFocusEvent(d)}))}setChatbotPosition(t){t&&(this.chatbotPosition.value=t)}}(window.chatbotBaseUrl);function f(t,e){var o;null==(o=C.chatbotWrapperElement)||o.setAttribute("data-chatbotPosition",e)}function g(t,e){if(e!==t&&(function(){const t=document.getElementById(c);t&&(t.style.top="",t.style.left="",t.style.transform="")}(),e.includes("window-open")?document.body.classList.add("ph-chatbot-parent-body"):document.body.classList.remove("ph-chatbot-parent-body"),null==C?void 0:C.chatbotWrapperElement)){C.chatbotWrapperElement.setAttribute("data-chatbotState",e);const t=getComputedStyle(C.chatbotWrapperElement).borderRadius??"10px";C.communicationService.postDataToChatbot("BORDER_RADIUS",t)}}function I(t,e){var o;null==(o=C.chatbotWrapperElement)||o.setAttribute("data-theme",e)}function E(t,e){var o;null==(o=C.chatbotWrapperElement)||o.setAttribute("data-chatbotWindowSize",e)}function y(t,e){C.chatbotWrapperElement&&(C.chatbotWrapperElement.style.setProperty("--chatbot-wrapper-width",`${e.width}`),C.chatbotWrapperElement.style.setProperty("--chatbot-wrapper-height",`${e.height}`))}const _={configurations:{data:{}},isContainerApproachEnabledForTXM:!0,configurationsDDO:"getChatbotConfigurations",phContext:window.phApp,currentJobInfo:null==(n=null==(o=null==(e=null==(t=window.phApp)?void 0:t.ddo)?void 0:e.jobDetail)?void 0:o.data)?void 0:n.job,makeFetchRequest:async function(t,{body:e,method:o="POST",headers:n={}}){var a,r,h,s,c,d,b,u,p,m,w;if(await l(null==(a=window.phChatbot)?void 0:a.phContext,500),!(null==(r=window.phChatbot)?void 0:r.phContext))throw Error(i);return(null==(h=window.phChatbot)?void 0:h.phContext)==window.phApp?(await l(null==(d=null==(c=null==(s=window.phApp)?void 0:s.phb)?void 0:c.profileLoginService)?void 0:d.fetchRequest,500),null==(p=null==(u=null==(b=window.phApp)?void 0:b.phb)?void 0:u.profileLoginService)?void 0:p.fetchRequest(t,e)):(window.phChatbot.phContext=window.phChatbot.phContext,await l(null==(m=window.phChatbot.phContext)?void 0:m.fetchRequest,500),(null==(w=window.phChatbot)?void 0:w.phContext.fetchRequest)?window.phChatbot.phContext.fetchRequest(t,{body:e,method:o,headers:n}):{})},...window.requiredPhInfo,...window.phChatbot};window.phChatbot=_,C.invokeInitator()}();
//# sourceMappingURL=phenom-chatbot-trigger.js.map
